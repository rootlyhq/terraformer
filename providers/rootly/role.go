
// Generated by generators/rootly/rootly.js
 
package rootly

import (
	
	"github.com/GoogleCloudPlatform/terraformer/terraformutils"
	"github.com/rootlyhq/terraform-provider-rootly/client"
	rootlygo "github.com/rootlyhq/terraform-provider-rootly/schema"
)

type RoleGenerator struct {
	RootlyService
}

func (g* RoleGenerator) InitResources() error {
	page_size := 50
	page_num := 1

	client, err := g.RootlyClient()
	if err != nil {
		return err
	}

	for {
		resources, err := func(page_size, page_num int) ([]interface{}, error) {
			params := new(rootlygo.ListRolesParams)
			params.PageSize = &page_size
			params.PageNumber = &page_num
			return client.ListRoles(params)
		}(page_size, page_num)

		if err != nil {
			return err
		}

		if len(resources) == 0 {
			break
		}

  	for _, resource := range resources {
      tf_resource := g.createRoleResource(resource)
      g.Resources = append(g.Resources, tf_resource)
      
  	}

		page_num += 1
	}

	return nil
}

func (g *RoleGenerator) createRoleResource(provider_resource interface{}) terraformutils.Resource {
	x, _ := provider_resource.(*client.Role)
	return terraformutils.NewSimpleResource(
		x.ID,
		x.Slug,
		"rootly_role",
		g.ProviderName,
		[]string{},
	)
}




